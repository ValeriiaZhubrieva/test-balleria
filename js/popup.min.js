let d=(s,t=500,e=0)=>{s.classList.contains("--slide")||(s.classList.add("--slide"),s.style.transitionProperty="height, margin, padding",s.style.transitionDuration=t+"ms",s.style.height=`${s.offsetHeight}px`,s.offsetHeight,s.style.overflow="hidden",s.style.height=e?`${e}px`:"0px",s.style.paddingTop=0,s.style.paddingBottom=0,s.style.marginTop=0,s.style.marginBottom=0,window.setTimeout(()=>{s.hidden=!e,e||s.style.removeProperty("height"),s.style.removeProperty("padding-top"),s.style.removeProperty("padding-bottom"),s.style.removeProperty("margin-top"),s.style.removeProperty("margin-bottom"),e||s.style.removeProperty("overflow"),s.style.removeProperty("transition-duration"),s.style.removeProperty("transition-property"),s.classList.remove("--slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:s}}))},t))},h=(s,t=500,e=0)=>{if(!s.classList.contains("--slide")){s.classList.add("--slide"),s.hidden=s.hidden?!1:null,e&&s.style.removeProperty("height");let i=s.offsetHeight;s.style.overflow="hidden",s.style.height=e?`${e}px`:"0px",s.style.paddingTop=0,s.style.paddingBottom=0,s.style.marginTop=0,s.style.marginBottom=0,s.offsetHeight,s.style.transitionProperty="height, margin, padding",s.style.transitionDuration=t+"ms",s.style.height=i+"px",s.style.removeProperty("padding-top"),s.style.removeProperty("padding-bottom"),s.style.removeProperty("margin-top"),s.style.removeProperty("margin-bottom"),window.setTimeout(()=>{s.style.removeProperty("height"),s.style.removeProperty("overflow"),s.style.removeProperty("transition-duration"),s.style.removeProperty("transition-property"),s.classList.remove("--slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:s}}))},t)}},f=(s,t=500)=>s.hidden?h(s,t):d(s,t),r=!0,m=(s=500)=>{if(r){const t=document.querySelectorAll("[data-fls-lp]");setTimeout(()=>{t.forEach(e=>{e.style.paddingRight=""}),document.body.style.paddingRight="",document.documentElement.removeAttribute("data-fls-scrolllock")},s),r=!1,setTimeout(function(){r=!0},s)}},y=(s=500)=>{if(r){const t=document.querySelectorAll("[data-fls-lp]"),e=window.innerWidth-document.body.offsetWidth+"px";t.forEach(i=>{i.style.paddingRight=e}),document.body.style.paddingRight=e,document.documentElement.setAttribute("data-fls-scrolllock",""),r=!1,setTimeout(function(){r=!0},s)}};function b(s,t){const e=Array.from(s).filter(n=>n.dataset[t]).map(n=>{const[l,a="max"]=n.dataset[t].split(",");return{value:l,type:a,item:n}});if(e.length===0)return[];const i=e.map(({value:n,type:l})=>`(${l}-width: ${n}px),${n},${l}`);return[...new Set(i)].map(n=>{const[l,a,u]=n.split(","),p=window.matchMedia(l);return{itemsArray:e.filter(c=>c.value===a&&c.type===u),matchMedia:p}})}class v{constructor(t){let e={logging:!0,init:!0,attributeOpenButton:"data-fls-popup-link",attributeCloseButton:"data-fls-popup-close",fixElementSelector:"[data-fls-lp]",attributeMain:"data-fls-popup",youtubeAttribute:"data-fls-popup-youtube",youtubePlaceAttribute:"data-fls-popup-youtube-place",setAutoplayYoutube:!0,classes:{popup:"popup",popupContent:"data-fls-popup-body",popupActive:"data-fls-popup-active",bodyActive:"data-fls-popup-open"},focusCatch:!0,closeEsc:!0,bodyLock:!0,hashSettings:{location:!1,goHash:!1},on:{beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}}};this.youTubeCode,this.isOpen=!1,this.targetOpen={selector:!1,element:!1},this.previousOpen={selector:!1,element:!1},this.lastClosed={selector:!1,element:!1},this._dataValue=!1,this.hash=!1,this._reopen=!1,this._selectorOpen=!1,this.lastFocusEl=!1,this._focusEl=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","area[href]","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.options={...e,...t,classes:{...e.classes,...t?.classes},hashSettings:{...e.hashSettings,...t?.hashSettings},on:{...e.on,...t?.on}},this.bodyLock=!1,this.options.init&&this.initPopups()}initPopups(){this.buildPopup(),this.eventsPopup()}buildPopup(){}eventsPopup(){document.addEventListener("click",(function(t){const e=t.target.closest(`[${this.options.attributeOpenButton}]`);if(e){if(t.preventDefault(),this._dataValue=e.getAttribute(this.options.attributeOpenButton)?e.getAttribute(this.options.attributeOpenButton):"error",this.youTubeCode=e.getAttribute(this.options.youtubeAttribute)?e.getAttribute(this.options.youtubeAttribute):null,this._dataValue!=="error"){this.isOpen||(this.lastFocusEl=e),this.targetOpen.selector=`${this._dataValue}`,this._selectorOpen=!0,this.open();return}return}if(t.target.closest(`[${this.options.attributeCloseButton}]`)||!t.target.closest(`[${this.options.classes.popupContent}]`)&&this.isOpen){t.preventDefault(),this.close();return}}).bind(this)),document.addEventListener("keydown",(function(t){if(this.options.closeEsc&&t.which==27&&t.code==="Escape"&&this.isOpen){t.preventDefault(),this.close();return}if(this.options.focusCatch&&t.which==9&&this.isOpen){this._focusCatch(t);return}}).bind(this)),this.options.hashSettings.goHash&&(window.addEventListener("hashchange",(function(){window.location.hash?this._openToHash():this.close(this.targetOpen.selector)}).bind(this)),window.location.hash&&this._openToHash())}open(t){if(r&&(this.bodyLock=!!(document.documentElement.hasAttribute("data-fls-scrolllock")&&!this.isOpen),t&&typeof t=="string"&&t.trim()!==""&&(this.targetOpen.selector=t,this._selectorOpen=!0),this.isOpen&&(this._reopen=!0,this.close()),this._selectorOpen||(this.targetOpen.selector=this.lastClosed.selector),this._reopen||(this.previousActiveElement=document.activeElement),this.targetOpen.element=document.querySelector(`[${this.options.attributeMain}=${this.targetOpen.selector}]`),this.targetOpen.element)){const e=this.youTubeCode||this.targetOpen.element.getAttribute(`${this.options.youtubeAttribute}`);if(e){const o=`https://www.youtube.com/embed/${e}?rel=0&showinfo=0&autoplay=1`,n=document.createElement("iframe"),l=this.options.setAutoplayYoutube?"autoplay;":"";n.setAttribute("allowfullscreen",""),n.setAttribute("allow",`${l}; encrypted-media`),n.setAttribute("src",o),this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)||this.targetOpen.element.querySelector("[data-fls-popup-content]").setAttribute(`${this.options.youtubePlaceAttribute}`,""),this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).appendChild(n)}const i=this.targetOpen.element.querySelector("video");i&&i.play().catch(()=>{}),this.options.hashSettings.location&&(this._getHash(),this._setHash()),this.options.on.beforeOpen(this),document.dispatchEvent(new CustomEvent("beforePopupOpen",{detail:{popup:this}})),this.targetOpen.element.setAttribute(this.options.classes.popupActive,""),document.documentElement.setAttribute(this.options.classes.bodyActive,""),this._reopen?this._reopen=!1:this.bodyLock||y(),this.targetOpen.element.setAttribute("aria-hidden","false"),this.previousOpen.selector=this.targetOpen.selector,this.previousOpen.element=this.targetOpen.element,this._selectorOpen=!1,this.isOpen=!0,setTimeout(()=>{this._focusTrap()},50),this.options.on.afterOpen(this),document.dispatchEvent(new CustomEvent("afterPopupOpen",{detail:{popup:this}}))}}close(t){if(t&&typeof t=="string"&&t.trim()!==""&&(this.previousOpen.selector=t),!this.isOpen||!r)return;this.options.on.beforeClose(this),document.dispatchEvent(new CustomEvent("beforePopupClose",{detail:{popup:this}})),this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)&&setTimeout(()=>{this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).innerHTML=""},500);const e=this.targetOpen.element.querySelector("video");e&&(e.pause(),e.currentTime=0),this.previousOpen.element.removeAttribute(this.options.classes.popupActive),this.previousOpen.element.setAttribute("aria-hidden","true"),this._reopen||(document.documentElement.removeAttribute(this.options.classes.bodyActive),this.bodyLock||m(),this.isOpen=!1),this._removeHash(),this._selectorOpen&&(this.lastClosed.selector=this.previousOpen.selector,this.lastClosed.element=this.previousOpen.element),this.options.on.afterClose(this),document.dispatchEvent(new CustomEvent("afterPopupClose",{detail:{popup:this}})),setTimeout(()=>{this._focusTrap()},50)}_getHash(){this.options.hashSettings.location&&(this.hash=`#${this.targetOpen.selector}`)}_openToHash(){let t=window.location.hash.replace("#","");const e=document.querySelector(`[${this.options.attributeOpenButton}="${t}"]`);e&&(this.youTubeCode=e.getAttribute(this.options.youtubeAttribute)?e.getAttribute(this.options.youtubeAttribute):null),t&&this.open(t)}_setHash(){history.pushState("","",this.hash)}_removeHash(){history.pushState("","",window.location.href.split("#")[0])}_focusCatch(t){const e=this.targetOpen.element.querySelectorAll(this._focusEl),i=Array.prototype.slice.call(e),o=i.indexOf(document.activeElement);t.shiftKey&&o===0&&(i[i.length-1].focus(),t.preventDefault()),!t.shiftKey&&o===i.length-1&&(i[0].focus(),t.preventDefault())}_focusTrap(){const t=this.previousOpen.element.querySelectorAll(this._focusEl);!this.isOpen&&this.lastFocusEl?this.lastFocusEl.focus():t[0].focus()}}document.querySelector("[data-fls-popup]")&&window.addEventListener("load",()=>window.flsPopup=new v({}));class O{constructor(){this.type="max",this.init()}init(){this.objects=[],this.daClassname="--dynamic",this.nodes=[...document.querySelectorAll("[data-fls-dynamic]")],this.nodes.forEach(t=>{const i=t.dataset.flsDynamic.trim().split(","),o={};o.element=t,o.parent=t.parentNode,o.destinationParent=i[3]&&t.closest(i[3].trim())||document,i[3]&&i[3].trim();const n=i[0]?i[0].trim():null;if(n){const l=o.destinationParent.querySelector(n);l&&(o.destination=l)}o.breakpoint=i[1]?i[1].trim():"767.98",o.place=i[2]?i[2].trim():"last",o.index=this.indexInParent(o.parent,o.element),this.objects.push(o)}),this.arraySort(this.objects),this.mediaQueries=this.objects.map(({breakpoint:t})=>`(${this.type}-width: ${t/16}em),${t}`).filter((t,e,i)=>i.indexOf(t)===e),this.mediaQueries.forEach(t=>{const e=t.split(","),i=window.matchMedia(e[0]),o=e[1],n=this.objects.filter(({breakpoint:l})=>l===o);i.addEventListener("change",()=>{this.mediaHandler(i,n)}),this.mediaHandler(i,n)})}mediaHandler(t,e){t.matches?e.forEach(i=>{i.destination&&this.moveTo(i.place,i.element,i.destination)}):e.forEach(({parent:i,element:o,index:n})=>{o.classList.contains(this.daClassname)&&this.moveBack(i,o,n)})}moveTo(t,e,i){e.classList.add(this.daClassname);const o=t==="last"||t==="first"?t:parseInt(t,10);o==="last"||o>=i.children.length?i.append(e):o==="first"?i.prepend(e):i.children[o].before(e)}moveBack(t,e,i){e.classList.remove(this.daClassname),t.children[i]!==void 0?t.children[i].before(e):t.append(e)}indexInParent(t,e){return[...t.children].indexOf(e)}arraySort(t){if(this.type==="min")t.sort((e,i)=>e.breakpoint===i.breakpoint?e.place===i.place?0:e.place==="first"||i.place==="last"?-1:e.place==="last"||i.place==="first"?1:0:e.breakpoint-i.breakpoint);else{t.sort((e,i)=>e.breakpoint===i.breakpoint?e.place===i.place?0:e.place==="first"||i.place==="last"?1:e.place==="last"||i.place==="first"?-1:0:i.breakpoint-e.breakpoint);return}}}document.querySelector("[data-fls-dynamic]")&&window.addEventListener("load",()=>new O);function A(){document.addEventListener("click",t),document.addEventListener("input",t);function s(e){const i=e.querySelector("[data-fls-quantity-value]"),o=e.querySelector("[data-fls-quantity-plus]"),n=e.querySelector("[data-fls-quantity-minus]"),l=+i.dataset.flsQuantityMin||1,a=+i.dataset.flsQuantityMax||1/0,u=+i.value;n&&(u<=l?n.classList.add("disabled"):n.classList.remove("disabled")),o&&(u>=a?o.classList.add("disabled"):o.classList.remove("disabled"))}function t(e){const i=e.type,o=e.target;if(i==="click"){if(o.closest("[data-fls-quantity-plus]")||o.closest("[data-fls-quantity-minus]")){const n=o.closest("[data-fls-quantity]"),l=n.querySelector("[data-fls-quantity-value]");let a=parseInt(l.value);const u=+l.dataset.flsQuantityMin||1,p=+l.dataset.flsQuantityMax||1/0;o.hasAttribute("data-fls-quantity-plus")?(a++,a>p&&(a=p)):(a--,a<u&&(a=u)),l.value=a,s(n)}}else if(i==="input"&&o.closest("[data-fls-quantity-value]")){const n=o.closest("[data-fls-quantity-value]"),l=+n.dataset.flsQuantityMin||1;(n.value==0||/[^0-9]/gi.test(n.value))&&(n.value=l),s(n.closest("[data-fls-quantity]"))}}document.querySelectorAll("[data-fls-quantity]").forEach(e=>{s(e)})}document.querySelector("[data-fls-quantity]")&&window.addEventListener("load",A);export{d as a,b as d,f as s};
